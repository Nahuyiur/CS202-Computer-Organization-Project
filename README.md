# CS202-Computer-Organization-Project

一个基于 **RISC-V RV32I 指令集** 的简易 CPU 设计与实现项目。  
我们完成了 **单周期 CPU** 和 **五级流水线 CPU** 两种架构的实现，并成功移植到 FPGA 平台进行验证。  

---

## 👥 项目成员
| 学号     | 姓名   | 负责模块                           | 贡献 |
| -------- | ------ | ---------------------------------- | ---- |
| 12310513 | 娄毅彬 | 指令译码、寄存器堆、仿真与上板调试 | 33%  |
| 12310519 | 方昊城 | 整体架构、数据存储器、流水线设计   | 33%  |
| 12310520 | 芮煜涵 | ALU、PC & 指令存储器、样例测试     | 33%  |

---

## 🏗️ 架构设计

### 单周期 CPU ✅ 已上板
- 每条指令一个时钟周期完成
- CPI 理论值为 1
- 已完成 LED、数码管、IO 交互验证

### 五级流水线 CPU 🔬 仿真实现
- 经典五级结构：IF → ID → EX → MEM → WB
- 实现 **数据前递 (Forwarding)** 与 **Stall 控制**
- 支持 **静态分支预测**（LRU 缓存）
- CPI 接近 1，吞吐率优于单周期

---

## 🖥️ ISA & 指令支持
- **R-type**: `add, sub, and, or, xor, slt...`  
- **I-type**: `addi, lw, jalr...`  
- **S-type**: `sw, sh, sb`  
- **B-type**: `beq, bne, blt, bge...`  
- **U-type**: `lui, auipc`  
- **J-type**: `jal`  
- **SYS**: `ecall` (IO 扩展)

---

## 🔌 外设与接口
- **输入**: 拨码开关、确认键  
- **输出**: LED、数码管（支持十进制/十六进制显示）  
- **通信**: UART 程序下载  
- **栈空间**: 初始 `SP = 0x2000`

---

## ⚡ 功能亮点
- **ECALL 扩展**  
  - `a7=1` → 输出 `a0` 到数码管  
  - `a7=5` → 从开关读取值到 `a0`  
- **AUIPC 指令支持**  
- **UART 下载程序支持**  
- **Debug 模块**：记录每周期 PC 与寄存器状态  

---

## ✅ 测试与验证
- 所有基本指令（R/I/S/J 类型）均通过仿真与上板测试  
- Forwarding、Stall、分支预测等机制在仿真中稳定运行  
- 上板测试完成 LED、数码管交互验证  

---

## 📈 遇到的问题与收获
- **数据冒险**：通过 Forwarding & Stall 机制解决  
- **寄存器堆时序错误**：修正时序控制保证正确读写  
- **分支预测缓存更新策略**：最终采用简化的 LRU 策略  

这次开发经历让我们更加理解了 **CPU 微结构** 与 **硬件时序控制** 的复杂性与挑战性。  

---

## 🔗 参考与启发
- 开源 RISC-V CPU 项目: [Cypher-Bruce/RISC-V-CPU](https://github.com/Cypher-Bruce/RISC-V-CPU)  
- AI 工具辅助生成测试代码与框架  

---

## 📜 License
本项目仅用于 **教学与学习目的**，不保证完全适用于生产环境。  
